#! /usr/bin/env -S jq --from-file --sort-keys

reduce
    .op.actions[]
as {"+": $p, "-": $m} (
    .value;
    .[$p // $m // ("invalid" | halt_error)] |= (
        [. + (if $p then 1 else -1 end), 0] | max
    )
)
